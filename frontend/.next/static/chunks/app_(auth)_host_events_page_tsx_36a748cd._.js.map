{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/Abdalmoute/OneDrive/Desktop/unijoy-events/frontend/app/%28auth%29/host/events/page.tsx"],"sourcesContent":["'use client';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport React, { useState, useEffect } from 'react';\r\nimport {\r\n  MapPin,\r\n  University,\r\n  User,\r\n  Flame,\r\n  Rocket,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  List,\r\n  Download,\r\n  School2Icon,\r\n  Clock3,\r\n  Gift,\r\n  DollarSign,\r\n  Search,\r\n} from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport EventCard from '@/components/ui/EventCard';\r\nimport { EventCategory } from '@/types/type';\r\nimport Link from 'next/link';\r\nimport { jsPDF } from 'jspdf';\r\nimport { Button } from '@/components/ui/button';\r\nimport { useDebounce } from 'use-debounce';\r\nimport { Input } from '@/components/ui/input';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { eventsTrai } from '@/constants/events';\r\n\r\nconst filters = [\r\n  { label: 'All', icon: School2Icon },\r\n  { label: 'Upcoming', icon: Flame },\r\n  { label: 'Past', icon: Clock3 },\r\n  { label: 'Free', icon: Gift },\r\n  { label: 'Price', icon: DollarSign },\r\n];\r\n\r\nconst FloatingBlobs = () => (\r\n  <>\r\n    {[...Array(5)].map((_, i) => (\r\n      <motion.div\r\n        key={i}\r\n        initial={{ scale: 0, rotate: 0 }}\r\n        animate={{\r\n          scale: [0.8, 1.2, 0.8],\r\n          rotate: [0, 180, 360],\r\n          x: Math.sin((i * Math.PI) / 2.5) * 100,\r\n          y: Math.cos((i * Math.PI) / 2.5) * 100,\r\n        }}\r\n        transition={{\r\n          duration: 10 + i * 2,\r\n          repeat: Infinity,\r\n          ease: 'easeInOut',\r\n        }}\r\n        className={`absolute w-${40 + i * 20} h-${\r\n          40 + i * 20\r\n        } opacity-10 blur-xl\r\n                bg-gradient-to-r ${\r\n                  i % 2\r\n                    ? 'from-pink-400 to-purple-400'\r\n                    : 'from-cyan-400 to-indigo-400'\r\n                }\r\n                rounded-full`}\r\n      />\r\n    ))}\r\n  </>\r\n);\r\n\r\nconst AllEventsPage = ({ className }: React.HTMLAttributes<HTMLDivElement>) => {\r\n  const { toast } = useToast();\r\n  const { token } = useAuth();\r\n  const [events, setEvents] = useState<EventCategory[]>([]);\r\n  const [activeFilter, setActiveFilter] = useState<string>('all');\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [debouncedQuery] = useDebounce(searchQuery, 300);\r\n  // const [isLoading, setIsLoading] = useState(true);\r\n  // حالة Pagination الجديدة\r\n\r\n  const [currentPage, setCurrentPage] = useState(1); // حالة Pagination الجديدة\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [totalItems, setTotalItems] = useState(0);\r\n  const [eventsPerPage] = useState(6); // عدد الأحداث في كل صفحة\r\n  //const [loading, setLoading] = useState(false);\r\n\r\n  const generateReport = (event: EventCategory) => {\r\n    const doc = new jsPDF();\r\n\r\n    doc.setFontSize(16);\r\n    doc.text('Booking Invoice', 20, 20);\r\n\r\n    doc.setFontSize(12);\r\n    doc.text(`Student Name: Test User`, 20, 40);\r\n    doc.text(`Student Email: test@example.com`, 20, 50);\r\n\r\n    doc.text(`Event Name: ${event.title}`, 20, 70);\r\n    doc.text(`Location: ${event.location}`, 20, 80);\r\n    doc.text(`Date: ${new Date(event.date).toLocaleDateString()}`, 20, 90);\r\n\r\n    doc.text(`Booking ID: #${event.registeringId || '123456'}`, 20, 110);\r\n    doc.text('Thank you for booking with us!', 20, 130);\r\n\r\n    doc.save(`Invoice-${event.title}.pdf`);\r\n  };\r\n    const fetchEvents = async () => {\r\n      const filterType =\r\n        activeFilter === 'all'\r\n          ? ''\r\n          : activeFilter === 'upcoming'\r\n          ? 'upcoming'\r\n          : activeFilter === 'past'\r\n          ? 'past'\r\n          : '';\r\n      try {\r\n        const res = await fetch(\r\n          `http://localhost:8080/host/events?page=${currentPage}&perPage=${eventsPerPage}&type=${filterType}`,\r\n          {\r\n            method: 'GET',\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n              'Content-Type': 'application/json',\r\n            },\r\n          }\r\n        );\r\n        const data = await res.json();\r\n        setEvents(data.events);\r\n        setTotalPages(data.totalPages);\r\n        setTotalItems(data.totalItems);\r\n        toast({\r\n          title: 'Fetch successfully',\r\n          description: data.message,\r\n          className: 'bg-green-500 text-white',\r\n        });\r\n      } catch (error: any) {\r\n        // Handle connection errors or unexpected errors.\r\n        toast({\r\n          title: 'Error',\r\n          description: error?.message || 'An unexpected error occurred.',\r\n          className: 'bg-red-600 text-white border-0',\r\n        });\r\n      }\r\n    };\r\n    useEffect(() => {\r\n      if (token) {\r\n        fetchEvents();\r\n      }\r\n    }, [activeFilter, currentPage, token]);\r\n  \r\n  // تصفية الأحداث\r\n  const currentEvents = (events || [])?.filter((event) => {\r\n    const matchesSearch = event.title?.toLowerCase()\r\n      .includes(debouncedQuery.toLowerCase());\r\n    const matchesFilter =\r\n      activeFilter === 'all' ||\r\n      (activeFilter === 'upcoming' && event.status === 'upcoming') ||\r\n      (activeFilter === 'past' && event.status === 'past') ||\r\n      (activeFilter === 'pending' && event.status === 'pending') ||\r\n      (activeFilter === 'approved' && event.status === 'approved') ||\r\n      (activeFilter === 'rejected' && event.status === 'rejected');\r\n\r\n    return matchesSearch && matchesFilter;\r\n  });\r\n\r\n  // تغيير الصفحة\r\n  const paginate = (pageNumber: number) => setCurrentPage(pageNumber);\r\n\r\n  // إعادة تعيين الصفحة إلى 1 عند تغيير الفلتر\r\n  useEffect(() => {\r\n    setCurrentPage(1);\r\n  }, [activeFilter]);\r\n\r\n};\r\nexport default AllEventsPage;\r\n"],"names":[],"mappings":"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","debugId":null}}]
}